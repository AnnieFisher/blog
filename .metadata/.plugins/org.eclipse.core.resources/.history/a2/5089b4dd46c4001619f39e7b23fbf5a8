
var app = angular.module('ngBlog');
app.controller('postsController', function($scope, postService, $location){
    
	$scope.posts = [];
	
	  $scope.loadData = function(){
	      postService.getPosts()
	        .then(function(response){
	          $scope.posts = response.data;
	          console.log(response.data)
	        });
		 
	    };
	  
	
    $scope.addPostRedirect = function() {
    		console.log("in here")
		$location.url('/addPost');
	};
	
	$scope.createPost = function(blog) {
	     
	      blog.date = Date.now();

	      var newBlog = {
	        name : post.postName,
	        date : post.postDate,
	        body : post.body,
	 
	      }

	      routeService.addPost(blog)
	      .then(function(res){
	        console.log(blog)
	      })
	      $location.url("/index")
	}




	$scope.delete = function(blog) {
	  routeService.deletePost(blog)
	    .then(function(res){
	      $scope.loadData();
	    })
	    $location.url("/index")
	  }

	$scope.loadData();
	
});







